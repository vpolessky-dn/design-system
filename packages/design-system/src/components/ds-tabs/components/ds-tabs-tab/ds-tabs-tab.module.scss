@use '../../../../styles/typography';

$tab-border-width: 1px;
$badge-height: 20px;
$menu-content-width: 142px;
$transition-duration: 0.2s;
$disabled-opacity: 0.5;

.tabItem {
	@include typography.body-sm-reg;
	display: inline-flex;
	align-items: center;
	background: var(--color-background);
	border-radius: var(--exo-spacing-2x-small);
	cursor: pointer;
	transition:
		background-color $transition-duration,
		color $transition-duration,
		border-color $transition-duration;
	position: relative;
	color: var(--color-font-main);
	border: $tab-border-width solid transparent;
	white-space: nowrap;

	&:hover:not(:disabled):not([aria-selected='true']) {
		background: var(--color-background-secondary);

		.badge {
			background: var(--color-background-tertiary);
		}
	}

	&:active:not(:disabled):not([aria-selected='true']) {
		background: var(--color-background-tertiary);

		.badge {
			background: var(--color-background-secondary);
		}
	}

	&:focus-visible:not(:disabled):not([aria-selected='true']) {
		border-color: var(--color-border-action-hover);
		background: var(--color-background-secondary);
		outline: none;

		.badge {
			background: var(--color-background-tertiary);
		}
	}

	&:disabled {
		cursor: not-allowed;
		opacity: $disabled-opacity;
		color: var(--color-font-disabled);
	}

	&[aria-selected='true'] {
		@include typography.body-sm-md;
		color: var(--color-background-selected);
		background: var(--color-background);

		.icon {
			color: var(--color-background-selected);
		}

		.badge {
			background: var(--color-background-action-secondary-hover);
			color: var(--color-background-selected);
		}

		&:hover:not(:disabled) {
			background: var(--color-background-selected-weak);
		}

		&:active:not(:disabled) {
			background: var(--color-background-selected-weak);
		}

		&:focus-visible:not(:disabled) {
			border-color: var(--color-background-selected);
			background: var(--color-background-selected-weak);
			outline: none;
		}
	}

	// Horizontal orientation + size variants
	[data-orientation='horizontal'] & {
		flex-direction: row;
		justify-content: center;
		gap: var(--spacing-3xs);
		flex: 0 0 auto;
		width: auto;
	}

	[data-orientation='horizontal'][data-size='medium'] & {
		padding: var(--spacing-xs) var(--spacing-sm);
	}

	[data-orientation='horizontal'][data-size='small'] & {
		padding: var(--spacing-2xs) var(--spacing-sm);
	}

	// Vertical orientation + size variants
	[data-orientation='vertical'] & {
		flex-direction: row;
		justify-content: flex-start;
		gap: var(--spacing-3xs);
		width: 100%;
	}

	[data-orientation='vertical'][data-size='medium'] & {
		padding: var(--spacing-sm) var(--spacing-standard);
		padding-left: var(--spacing-xs);
		border-radius: var(--exo-spacing-2x-small) 0 0 var(--exo-spacing-2x-small);
	}

	[data-orientation='vertical'][data-size='small'] & {
		padding: var(--spacing-xs) var(--spacing-standard);
		padding-left: var(--spacing-xs);
		border-radius: var(--exo-spacing-2x-small) 0 0 var(--exo-spacing-2x-small);
	}
}

.icon {
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--color-font-secondary);
	flex-shrink: 0;
}

.label {
	@include typography.body-sm-reg;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	flex: 1 1 auto;
	min-width: 0;
	text-align: left;

	[aria-selected='true'] & {
		@include typography.body-sm-md;
	}
}

.menuTrigger {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
	color: var(--color-font-main) !important;
	cursor: pointer;
	border-radius: var(--exo-spacing-2x-small);
	transition:
		background-color $transition-duration,
		color $transition-duration;

	&:hover {
		background: var(--color-background-action-secondary);
		color: var(--color-font-main);
	}

	&:active {
		background: var(--color-background-tertiary);
	}

	&:focus-visible {
		outline: var(--spacing-4xs) solid var(--color-border-action-hover);
		outline-offset: var(--spacing-4xs);
	}

	[aria-selected='true'] & {
		color: var(--color-background-selected);

		&:hover {
			background: var(--color-background);
		}
	}

	[disabled] & {
		opacity: $disabled-opacity;
		cursor: not-allowed;
		pointer-events: none;
	}
}

.badge {
	@include typography.body-xs-reg;
	display: flex;
	align-items: center;
	justify-content: center;
	height: $badge-height;
	padding: 0 var(--spacing-2xs);
	border-radius: var(--spacing-lg);
	background: var(--color-background-secondary);
	color: var(--color-font-main);
	line-height: var(--line-height-xs);
	flex-shrink: 0;
}

.menuContent {
	background: var(--color-background);
	border: $tab-border-width solid var(--color-border-secondary);
	border-radius: var(--exo-spacing-2x-small);
	box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.15);
	padding: var(--spacing-3xs);
	width: $menu-content-width;
}

.menuItem {
	@include typography.body-sm-reg;
	display: flex;
	align-items: center;
	padding: var(--spacing-3xs);
	border-radius: var(--exo-spacing-2x-small);
	cursor: pointer;
	color: var(--color-font-main);
	background: var(--color-background);
	transition: background-color $transition-duration;
	user-select: none;
	white-space: nowrap;

	&:hover {
		background: var(--color-background-secondary);
	}

	&:active {
		background: var(--color-background-tertiary);
	}

	&[data-disabled] {
		opacity: $disabled-opacity;
		cursor: not-allowed;
		pointer-events: none;
	}
}

.menuItemLabel {
	flex: 1;
	min-width: 0;
	line-height: var(--line-height-sm);
}
