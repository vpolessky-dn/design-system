@use 'sass:map';
@use 'sass:math';

:root {
	--grid-gutter: 16px;
}

// max columns
$columns: 12;
// max rows
$rows: 8;

$grid-hd: (
	gutter: var(--grid-gutter),
	margin: 16px 20px,
);

@mixin grid-setup($grid-setup) {
	gap: map.get($grid-setup, 'gutter');
	padding: map.get($grid-setup, 'margin');
	width: 100%;
	height: 100%;
	box-sizing: border-box;
}

@mixin generate-grid-classes($grid-setup) {
	@for $i from 1 through $columns {
		.ds-grid-col-span-#{$i} {
			--col-span: #{$i};
		}
		@if $i < $columns {
			.ds-grid-col-start-#{$i} {
				--col-start: #{$i};
			}
		}
	}
	@for $i from 1 through $rows {
		.ds-grid-row-span-#{$i} {
			--row-span: #{$i};
		}
		@if $i < $rows {
			.ds-grid-row-start-#{$i} {
				--row-start: #{$i};
			}
		}
	}
	@for $i from 3 through $columns {
		&.ds-grid-cols-#{$i} {
			grid-template-columns: repeat($i, 1fr);
		}
	}
	@for $i from 1 through math.floor(calc($rows / 2)) {
		$row-count: 2 * $i;
		&.ds-grid-rows-#{$row-count} {
			grid-template-rows: repeat($row-count, 1fr);
		}
	}
	.ds-grid-col-span-full {
		--col-span: #{$columns};
	}
	.ds-grid-row-span-full {
		--row-span: #{$rows};
	}
}

.ds-grid {
	display: grid;
	grid-template-columns: repeat($columns, 1fr);
	grid-template-rows: 1fr;
	@include grid-setup($grid-hd);
	@include generate-grid-classes($grid-hd);

	/*
    @media screen and (min-width: $qhd) {
      @include grid-setup($grid-qhd);
    }
  */
}

.ds-grid > [class^='ds-grid'] {
	grid-column: var(--col-start, auto) / span var(--col-span, 1);
	grid-row: var(--row-start, auto) / span var(--row-span, 1);
}
